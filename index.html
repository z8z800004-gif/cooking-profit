<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Cooking Profit Manager</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f1624;
      color: #d0d8e2;
      margin: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    header {
      width: 100%;
      padding: 15px;
      text-align: center;
      background: #1b2536;
      color: #4cc9f0;
      font-size: 24px;
      font-weight: bold;
      border-bottom: 2px solid #4cc9f0;
      text-shadow: 0 0 8px #4cc9f0;
    }
    .main-container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    .left-panel {
      width: 30%;
      background: #1b2536;
      border-right: 2px solid #4cc9f0;
      padding: 15px;
      overflow-y: auto;
    }
    .right-panel {
      width: 70%;
      padding: 20px;
      overflow-y: auto;
    }
    h2 {
      color: #4cc9f0;
      margin-top: 0;
    }
    .category {
      margin-bottom: 20px;
      padding: 10px;
      border-radius: 5px;
      background: #162032;
    }
    .green { border-left: 5px solid #4caf50; }
    .red { border-left: 5px solid #e63946; }
    .blue { border-left: 5px solid #2196f3; }
    .yellow { border-left: 5px solid #f1c40f; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
    }
    th, td {
      padding: 6px;
      border-bottom: 1px solid #334155;
      font-size: 14px;
    }
    th {
      color: #4cc9f0;
      text-align: left;
    }
    input {
      width: 80px;
      padding: 4px;
      background: #0f1624;
      border: 1px solid #4cc9f0;
      color: white;
    }
  </style>
</head>
<body>

<header>🍳 Cooking Profit Manager</header>
<div class="main-container">
  <div class="left-panel">
    <h2>재료 가격 관리</h2>
    <!-- Green Category -->
    <div class="category green">
      <div class="category-title">🟢 그린델 채집</div>
      <table>
        <tr><th>재료 이름</th><th>가격 입력</th><th>단위</th></tr>
        <tr><td>토마토베이스</td><td><input type="number" id="tomatoBase"></td><td>1개</td></tr>
        <tr><td>양파베이스</td><td><input type="number" id="onionBase"></td><td>1개</td></tr>
        <tr><td>마늘베이스</td><td><input type="number" id="garlicBase"></td><td>1개</td></tr>
        <tr><td>코코넛</td><td><input type="number" id="coconut"></td><td>1개</td></tr>
        <tr><td>파인애플</td><td><input type="number" id="pineapple"></td><td>1개</td></tr>
      </table>
    </div>

    <!-- Red Category -->
    <div class="category red">
      <div class="category-title">🔴 그린델 구매·가공</div>
      <table>
        <tr><th>재료 이름</th><th>가격 입력</th><th>단위</th></tr>
        <tr><td>소금</td><td><input type="number" id="salt"></td><td>1개</td></tr>
        <tr><td>요리용 달걀</td><td><input type="number" id="egg"></td><td>1개</td></tr>
        <tr><td>요리용 우유</td><td><input type="number" id="milk"></td><td>1병</td></tr>
        <tr><td>오일</td><td><input type="number" id="oil"></td><td>1병</td></tr>
        <tr><td>요리용 소금</td><td><input type="number" id="cookSalt"></td><td>1개</td></tr>
        <tr><td>치즈 조각</td><td><input type="number" id="cheese"></td><td>1개</td></tr>
        <tr><td>버터 조각</td><td><input type="number" id="butter"></td><td>1개</td></tr>
      </table>
    </div>

    <!-- Blue Category -->
    <div class="category blue">
      <div class="category-title">🔵 바닐라 가공</div>
      <table>
        <tr><th>재료 이름</th><th>가격 입력</th><th>단위</th></tr>
        <tr><td>설탕 큐브</td><td><input type="number" id="sugarCube"></td><td>1개</td></tr>
        <tr><td>당근 묶음</td><td><input type="number" id="carrotBundle"></td><td>64개 묶음</td></tr>
        <tr><td>감자 묶음</td><td><input type="number" id="potatoBundle"></td><td>64개 묶음</td></tr>
        <tr><td>비트 묶음</td><td><input type="number" id="beetBundle"></td><td>64개 묶음</td></tr>
        <tr><td>호박 묶음</td><td><input type="number" id="pumpkinBundle"></td><td>64개 묶음</td></tr>
        <tr><td>수박 묶음</td><td><input type="number" id="watermelonBundle"></td><td>64개 묶음</td></tr>
        <tr><td>달콤한 열매 묶음</td><td><input type="number" id="berryBundle"></td><td>64개 묶음</td></tr>
      </table>
    </div>

    <!-- Yellow Category -->
    <div class="category yellow">
      <div class="category-title">🟡 바닐라 + 그린델</div>
      <table>
        <tr><th>재료 이름</th><th>가격 입력</th><th>단위</th></tr>
        <tr><td>밀가루 반죽</td><td><input type="number" id="dough"></td><td>1개</td></tr>
      </table>
    </div>
  </div> <!-- left-panel 끝 -->
  <!-- right-panel -->
 <div class="right-panel">
  <h2>요리 수익 계산</h2>

  <div style="background:#162032; padding:15px; border-radius:10px; border:1px solid #4cc9f0;">
    <label>🍽 요리 이름:</label><br>
    <input type="text" id="dishName" placeholder="예: 토마토 파스타" style="width:60%;"><br><br>

    <label>💰 판매 가격 (1개당):</label><br>
    <input type="number" id="dishPrice" placeholder="예: 1890"><br><br>

    <h3>🌱 씨앗 가격 (64개 세트 기준)</h3>
    <label>토마토 씨앗:</label> <input type="number" id="tomatoSeed" placeholder="예: 5312"><br>
    <label>양파 씨앗:</label> <input type="number" id="onionSeed" placeholder="예: 5824"><br>
    <label>마늘 씨앗:</label> <input type="number" id="garlicSeed" placeholder="예: 5696"><br><br>

    <h3>🥕 기타 재료 단가 (1개당)</h3>
    <label>당근 묶음:</label> <input type="number" id="carrotBundleP" placeholder="예: 78"><br>
    <label>호박 묶음:</label> <input type="number" id="pumpkinBundleP" placeholder="예: 0"><br>
    <label>밀가루 반죽:</label> <input type="number" id="doughP" placeholder="예: 12"><br>
    <label>익힌 양다리살:</label> <input type="number" id="meatP" placeholder="예: 31"><br><br>

    <button id="calcBtn" style="background:#4cc9f0; border:none; color:#0f1624; font-weight:bold; padding:8px 15px; border-radius:5px; cursor:pointer;">
      ⚙️ 수익 계산하기
    </button>

    <div id="resultBox" style="margin-top:15px; background:#0f1624; padding:10px; border-radius:5px; border:1px solid #334155;"></div>
  </div>
</div>

<script>
document.getElementById("calcBtn").addEventListener("click", () => {
  const dishName = document.getElementById("dishName").value || "요리";
  const dishPrice = Number(document.getElementById("dishPrice").value) || 0;

  // 씨앗 가격
  const tomatoSeed = Number(document.getElementById("tomatoSeed").value) || 0;
  const onionSeed = Number(document.getElementById("onionSeed").value) || 0;
  const garlicSeed = Number(document.getElementById("garlicSeed").value) || 0;

  // 재료 단가
  const carrot = Number(document.getElementById("carrotBundleP").value) || 0;
  const pumpkin = Number(document.getElementById("pumpkinBundleP").value) || 0;
  const dough = Number(document.getElementById("doughP").value) || 0;
  const meat = Number(document.getElementById("meatP").value) || 0;

  // 64개 세트 기준 생산 계산
  const tomatoBase = 64 * 2.0 / 8;  // 16
  const onionBase = 64 * 1.5 / 8;   // 12
  const garlicBase = 64 * 2.5 / 8;  // 20
  const totalDishes = Math.min(tomatoBase, onionBase, garlicBase); // 병목 작물

  // 총 비용 계산
  const totalCost = tomatoSeed + onionSeed + garlicSeed
                   + totalDishes * (carrot + pumpkin + dough + meat);

  const totalRevenue = totalDishes * dishPrice;
  const profit = totalRevenue - totalCost;
  const roi = totalCost > 0 ? ((profit / totalCost) * 100).toFixed(1) : 0;

  let color = profit >= 0 ? "#4caf50" : "#e63946";
  const resultBox = document.getElementById("resultBox");

  resultBox.innerHTML = `
    <h3 style="color:#4cc9f0;">📊 ${dishName} 수익 분석</h3>
    <p>✅ 생산 가능 요리 수: <b>${totalDishes}</b>개</p>
    <p>💰 총 비용: <b>${totalCost.toLocaleString()}</b>원</p>
    <p>💵 총 매출: <b>${totalRevenue.toLocaleString()}</b>원</p>
    <p style="color:${color}; font-weight:bold;">
      ${profit >= 0 ? "이익" : "손해"}: ${profit.toLocaleString()}원
      (${roi}%)
    </p>
  `;
});
</script>


<script>
// ✅ 모든 input 필드를 가져옴
const inputs = document.querySelectorAll("input[type='number']");

// ✅ 페이지 로드 시 저장된 데이터 불러오기
window.addEventListener("load", () => {
  inputs.forEach(input => {
    const key = input.id || input.name || input.placeholder || input.labels?.[0]?.innerText || input.parentNode?.innerText.trim();
    const savedValue = localStorage.getItem(key);
    if (savedValue !== null) {
      input.value = savedValue;
    }
  });
});

// ✅ 입력 시 자동 저장
inputs.forEach(input => {
  input.addEventListener("input", () => {
    const key = input.id || input.name || input.placeholder || input.labels?.[0]?.innerText || input.parentNode?.innerText.trim();
    const value = input.value;
    if (key) localStorage.setItem(key, value);
  });
});
</script>

</body>
</html>
